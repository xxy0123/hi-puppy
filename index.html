<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç­”æ¡ˆä¹‹ä¹¦</title>
    <style>
        body { margin: 0; padding: 20px; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #1a1a1a; font-family: sans-serif; text-align: center; color: #fff; }
        .content-container { display: none; animation: fadeIn 1.5s ease-in-out; }
        #loading { font-size: 1.5em; }
        .text-answer { font-size: 2.5em; font-weight: bold; }
        .image-answer { max-width: 90vw; max-height: 80vh; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .audio-answer { filter: invert(1); }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>

<p id="loading">ç­‰ç­‰å“¦å®å®ğŸ¥°ï¼ŒçŒœçŒœä»Šå¤©çš„å°æƒŠå–œä¼šæ˜¯ä»€ä¹ˆğŸ‘€...</p>
<div id="text-container" class="content-container"><p id="text-answer" class="text-answer"></p></div>
<div id="image-container" class="content-container"><img id="image-answer" src="" alt="éšæœºå›¾ç‰‡" class="image-answer"></div>
<div id="audio-container" class="content-container"><audio id="audio-answer" controls autoplay class="audio-answer"></audio></div>

<script>
// --- æ‚¨å”¯ä¸€éœ€è¦ä¿®æ”¹çš„åœ°æ–¹ ---
// å°†ä¸‹é¢çš„é“¾æ¥æ›¿æ¢æˆæ‚¨è‡ªå·±çš„GitHubé¡¹ç›®åœ°å€ï¼
// æ ¼å¼: "https://api.github.com/repos/æ‚¨çš„ç”¨æˆ·å/æ‚¨çš„é¡¹ç›®å"
const GITHUB_REPO_API = "https://api.github.com/repos/xxy0123/hi-puppy";

// æ‚¨å¯ä»¥ç»§ç»­åœ¨è¿™é‡Œæ·»åŠ æˆ–ä¿®æ”¹æ–‡å­—ç­”æ¡ˆ
const textData = [
    "æ˜¯çš„", "æ¯«æ— ç–‘é—®", "æ¢ä¸ªè§’åº¦çœ‹", "å‰æ™¯å…‰æ˜", "ç›¸ä¿¡ä½ çš„ç›´è§‰",
    "æ—¶æœºæœªåˆ°", "æœ€å¥½ä¸è¦", "ä¿¡æ¯ä¸è¶³", "è¿™å–å†³äºä½ ", "å¿˜äº†å®ƒå§"
];

// --- ä¸‹æ–¹çš„ä»£ç æ˜¯å…¨è‡ªåŠ¨çš„ï¼Œæ— éœ€ä¿®æ”¹ ---

let imageData = [];
let audioData = [];

// ä»GitHubæ–‡ä»¶å¤¹è·å–æ–‡ä»¶åˆ—è¡¨
async function fetchContents(path) {
    try {
        const response = await fetch(`${GITHUB_REPO_API}/contents/${path}`);
        if (!response.ok) throw new Error('Network response was not ok');
        const data = await response.json();
        // è¿‡æ»¤æ‰æ–‡ä»¶å¤¹å’Œå ä½æ–‡ä»¶ï¼Œåªè¿”å›æ–‡ä»¶çš„ä¸‹è½½é“¾æ¥
        return data
            .filter(item => item.type === 'file' && !item.name.includes('placeholder'))
            .map(item => item.download_url);
    } catch (error) {
        console.error(`Failed to fetch ${path}:`, error);
        return []; // å¦‚æœè·å–å¤±è´¥ï¼Œè¿”å›ç©ºæ•°ç»„
    }
}

async function initializeAndShow() {
    // å¹¶è¡Œè·å–å›¾ç‰‡å’ŒéŸ³é¢‘åˆ—è¡¨
    [imageData, audioData] = await Promise.all([
        fetchContents('images'),
        fetchContents('audios')
    ]);
    
    // ç­‰å¾…8ç§’å†æ˜¾ç¤ºç­”æ¡ˆå†…å®¹
    setTimeout(() => {
        document.getElementById('loading').style.display = 'none';
        showRandomContent();
    }, 8000);  // 8000æ¯«ç§’ = 8ç§’
}

function showRandomContent() {
    document.querySelectorAll('.content-container').forEach(c => c.style.display = 'none');
    
    const availableTypes = [];
    if (textData.length > 0) availableTypes.push('text');
    if (imageData.length > 0) availableTypes.push('image');
    if (audioData.length > 0) availableTypes.push('audio');
    
    if (availableTypes.length === 0) {
        document.getElementById('loading').textContent = "å†…å®¹åº“ä¸ºç©ºï¼Œè¯·æ·»åŠ å†…å®¹ã€‚";
        document.getElementById('loading').style.display = 'block';
        return;
    }

    const randomType = availableTypes[Math.floor(Math.random() * availableTypes.length)];

    if (randomType === 'text') {
        const randomText = textData[Math.floor(Math.random() * textData.length)];
        document.getElementById('text-answer').textContent = randomText;
        document.getElementById('text-container').style.display = 'block';
    } else if (randomType === 'image') {
        const randomImage = imageData[Math.floor(Math.random() * imageData.length)];
        document.getElementById('image-answer').src = randomImage;
        document.getElementById('image-container').style.display = 'block';
    } else if (randomType === 'audio') {
        const randomAudio = audioData[Math.floor(Math.random() * audioData.length)];
        document.getElementById('audio-answer').src = randomAudio;
        document.getElementById('audio-container').style.display = 'block';
    }
}

// é¡µé¢åŠ è½½æ—¶å¯åŠ¨
window.onload = initializeAndShow;
</script>
</body>
</html>
