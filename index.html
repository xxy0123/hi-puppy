<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>答案之书</title>
    <style>
        body { margin: 0; padding: 20px; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #1a1a1a; font-family: sans-serif; text-align: center; color: #fff; }
        .content-container { display: none; animation: fadeIn 1.5s ease-in-out; }
        #loading { font-size: 1.5em; }
        .text-answer { font-size: 2.5em; font-weight: bold; }
        .image-answer { max-width: 90vw; max-height: 80vh; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .audio-answer { filter: invert(1); }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>

<p id="loading">正在获取天机...</p>
<div id="text-container" class="content-container"><p id="text-answer" class="text-answer"></p></div>
<div id="image-container" class="content-container"><img id="image-answer" src="" alt="随机图片" class="image-answer"></div>
<div id="audio-container" class="content-container"><audio id="audio-answer" controls autoplay class="audio-answer"></audio></div>

<script>
// --- 您唯一需要修改的地方 ---
// 将下面的链接替换成您自己的GitHub项目地址！
// 格式: "https://api.github.com/repos/您的用户名/您的项目名"
const GITHUB_REPO_API = "https://api.github.com/repos/xxy0123/hi-puppy";

// 您可以继续在这里添加或修改文字答案
const textData = [
    "是的", "毫无疑问", "换个角度看", "前景光明", "相信你的直觉",
    "时机未到", "最好不要", "信息不足", "这取决于你", "忘了它吧"
];

// --- 下方的代码是全自动的，无需修改 ---

let imageData = [];
let audioData = [];

// 从GitHub文件夹获取文件列表
async function fetchContents(path) {
    try {
        const response = await fetch(`${GITHUB_REPO_API}/contents/${path}`);
        if (!response.ok) throw new Error('Network response was not ok');
        const data = await response.json();
        // 过滤掉文件夹和占位文件，只返回文件的下载链接
        return data
            .filter(item => item.type === 'file' && !item.name.includes('placeholder'))
            .map(item => item.download_url);
    } catch (error) {
        console.error(`Failed to fetch ${path}:`, error);
        return []; // 如果获取失败，返回空数组
    }
}

async function initializeAndShow() {
    // 并行获取图片和音频列表
    [imageData, audioData] = await Promise.all([
        fetchContents('images'),
        fetchContents('audios')
    ]);
    
    document.getElementById('loading').style.display = 'none';
    showRandomContent();
}

function showRandomContent() {
    document.querySelectorAll('.content-container').forEach(c => c.style.display = 'none');
    
    const availableTypes = [];
    if (textData.length > 0) availableTypes.push('text');
    if (imageData.length > 0) availableTypes.push('image');
    if (audioData.length > 0) availableTypes.push('audio');
    
    if (availableTypes.length === 0) {
        document.getElementById('loading').textContent = "内容库为空，请添加内容。";
        document.getElementById('loading').style.display = 'block';
        return;
    }

    const randomType = availableTypes[Math.floor(Math.random() * availableTypes.length)];

    if (randomType === 'text') {
        const randomText = textData[Math.floor(Math.random() * textData.length)];
        document.getElementById('text-answer').textContent = randomText;
        document.getElementById('text-container').style.display = 'block';
    } else if (randomType === 'image') {
        const randomImage = imageData[Math.floor(Math.random() * imageData.length)];
        document.getElementById('image-answer').src = randomImage;
        document.getElementById('image-container').style.display = 'block';
    } else if (randomType === 'audio') {
        const randomAudio = audioData[Math.floor(Math.random() * audioData.length)];
        document.getElementById('audio-answer').src = randomAudio;
        document.getElementById('audio-container').style.display = 'block';
    }
}

// 页面加载时启动
window.onload = initializeAndShow;
</script>
</body>
</html>
